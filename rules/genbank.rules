# vim: syntax=python tabstop=4 expandtab
# coding: utf-8


from snakemake.remote.FTP import RemoteProvider as FTPRemoteProvider
FTP = FTPRemoteProvider()


rule genbank_download:
    input:
        lambda wildcards: FTP.remote(config["genbank"][wildcards.reference],
                                     insecure=True, keep_local=False)
    output:
        "{prefix}/{reference}.fasta"
    shell:
        "gzip -cd {input} | sed -e '/^>/! s/\([^ACGTacgt]\)/N/g' > {output}"
